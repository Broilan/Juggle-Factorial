<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jiggle Factorial</title>
    <link rel="stylesheet" href="../Settings/settings-modal.css">
    <link rel="stylesheet" href="./gameboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <h2 class="header">Jiggle Factorial</h2>

    <div id="game-container">
        <div id="canvas-container">
            <div id="info">
                <div id="level-display">Level: 3</div>
                <div id="timer-display">Timer: 30s</div>
                <div id="average-level-display">Average Level: 3</div>
            </div>
            <canvas id="gameCanvas" width="800" height="800"></canvas>
            <div id="button-container">
                <div id="sub-button-container">
                <i id="infoBtn" class="fas fa-book"></i>  
                <i id="settingsBtn" class="fas fa-cog"></i>
                </div>
                <button id="start-btn">start</button>
            </div>
        </div>
    </div>

    <div id="modal-container"></div>

    <!-- The Modal -->
    <div id="infoModal" class="instructions-modal">
        <!-- Modal content -->
        <div class="instructions-modal-content">
            <span class="instructions-close">&times;</span>
            <div class="icon-container">
                <i class="fas fa-book"></i>
            </div>

            <h1><strong>Overview</strong></h1>
            <p>Jiggle Factorial is designed to mimic Brain HQ's "Juggle Factor," which measures and improves multitasking ability, processing speed, working memory, and attention.</p>
            <h2><strong>How to Play</strong></h2>
            <p>After selecting and saving your desired <strong><a href="#settings-scroll">settings</a></strong> and clicking start, you'll be met with a set of uniquely colored balls. Some of these balls will be marked, one at a time, with numbers before reverting to their original, numberless state. After some time, the balls will freeze, at which point you'll select them in accordance with whether you've selected the <a href="#forwards-instructions"><strong>forwards</strong></a> or <a href="#backwards-instructions"><strong>backwards</strong></a> span. After doing so, a new, performance-adjusted level will begin.</p>
            <h2 id="settings-scroll"><strong>Settings</strong></h2>
            <h3><strong><u>Span Types</u></strong></h3>
            <p id="forwards-instructions"><strong>Forward:</strong>A set of ordered numbers will be generated, and you'll return them in ascending order.</p>
            <p id="backwards-instructions"><strong>Backwards:</strong> A set of ordered numbers will be generated, and you'll return them in descending order.</p>
            <p id="sequencing-instructions"><strong>Sequencing:</strong> A set of unordered numbers will be generated, and you'll return them in either ascending or descending order depending on whether you've selected the forwards or backwards span.</p>
            <h3><strong><u>Movement Types</u></strong></h3>
            <p><strong>Normal:</strong> Circles will move around the screen in random directions.</p>
            <p><strong>Rotation:</strong> Circles will rotate around a central point.</p>
            <p><strong>Rotation Groups:</strong> Number of circles to be formed by the balls.</p>
            <p><strong>Combination:</strong> Circles will move both randomly and around a central point. Select both normal and rotation mode to use this.</p>
            <h3><strong><u>Ball Settings</u></strong></h3>
            <p><strong>Distractors:</strong> Number of extra, unselectable balls.</p>
            <p><strong>Speed:</strong> Speed with which the balls move around the board.</p>
            <p><strong>Level:</strong> The number of non-distractor balls.</p>
            <h3><strong><u>Game Settings</u></strong></h3>
            <p><strong>Flash Mode:</strong> Circles flash intermittently.</p>
            <p><strong>Auto Progression:</strong> Automatically regress or progress after incorrectly or correctly answering.</p>
            <p><strong>Show Answers:</strong> Display the correct sequence after an incorrect attempt.</p>
            <h3><strong><u>Time Settings</u></strong></h3>
            <p><strong>Timer:</strong> Time you have to answer after the balls freeze.</p>
            <p><strong>Marking Time (s):</strong> Time the balls remain marked.</p>
            <p><strong>Delay Time:</strong> Interim between when the balls freeze and when you may begin selecting.</p>
        </div>
    </div>

    <script src="../index.js"></script>
    <script>
        // Get the modal
        let infoModal = document.getElementById("infoModal");
    
        // Get the button that opens the modal
        let infoBtn = document.getElementById("infoBtn");
    
        // Get the <span> element that closes the modal
        let closeSpan = document.getElementsByClassName("instructions-close")[0];
    
        // When the user clicks the button, open the modal 
        infoBtn.onclick = function() {
            infoModal.style.display = "flex";
            infoModal.style.justifyContent = "center";
            infoModal.style.alignItems = "center";
            document.body.classList.add('no-scroll'); // Disable body scroll
        }
    
        // When the user clicks on <span> (x), close the modal
        closeSpan.onclick = function() {
            infoModal.style.display = "none";
            document.body.classList.remove('no-scroll'); // Enable body scroll
        }
    
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == infoModal) {
                infoModal.style.display = "none";
                document.body.classList.remove('no-scroll'); // Enable body scroll
            }
        }

        // Adjust canvas size
        function resizeCanvas() {
            const canvasContainer = document.getElementById('canvas-container');
            const canvas = document.getElementById('gameCanvas');
            canvas.width = canvasContainer.clientWidth;
            canvas.height = canvasContainer.clientHeight;
        }

        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('load', resizeCanvas);
    </script>
</body>
</html>
